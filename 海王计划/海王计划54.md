# 海王计划54

[TOC]



## [348. 设计井字棋](https://leetcode.cn/problems/design-tic-tac-toe/)

~~~c++
class TicTacToe {
public:
   vector<int> rows;
   vector<int> cols;
   int diagonal;
   int antiDiagonal;

   TicTacToe(int n) {
       rows.assign(n, 0);
       cols.assign(n, 0);
       diagonal = 0;
       antiDiagonal = 0;
   }

   int move(int row, int col, int player) {
       int currentPlayer = (player == 1) ? 1 : -1;
       // 更新 rows 和 cols 数组中的当前用户
       rows[row] += currentPlayer;
       cols[col] += currentPlayer;
       // 更新 diagonal
       if (row == col) {
           diagonal += currentPlayer;
       }
       // 更新 anti Diagonal
       if (col == (cols.size() - row - 1)) {
           antiDiagonal += currentPlayer;
       }
       int n = rows.size();
       // 检查玩家是否赢得游戏
       if (abs(rows[row]) == n ||
           abs(cols[col]) == n ||
           abs(diagonal) == n ||
           abs(antiDiagonal) == n) {
           return player;
       }
       // 没有人赢
       return 0;
   }
};

/**
 * Your TicTacToe object will be instantiated and called as such:
 * TicTacToe* obj = new TicTacToe(n);
 * int param_1 = obj->move(row,col,player);
 */
~~~



## [353. 贪吃蛇](https://leetcode.cn/problems/design-snake-game/)

~~~c++
class SnakeGame {
public:
    SnakeGame(int width, int height, vector<vector<int>>& food) {
        m = height;
        n = width;
        this->food = food;
        score = 0;
        idx = 0;
        q.push_back(0);
        vis.insert(0);
    }

    int move(string direction) {
        int p = q.front();
        int i = p / n, j = p % n;
        int x = i, y = j;
        if (direction == "U") {
            --x;
        } else if (direction == "D") {
            ++x;
        } else if (direction == "L") {
            --y;
        } else {
            ++y;
        }
        //如果撞墙，游戏结束
        if (x < 0 || x >= m || y < 0 || y >= n) {
            return -1;
        }
        //咬到自己，游戏结束
        int cur = f(x, y);
        if (vis.count(cur)&&cur!=q.back()) {
            return -1;
        }
        //吃到食物，尾巴位置不变
        if (idx < food.size() && x == food[idx][0] && y == food[idx][1]) {
            ++score;
            ++idx;
        } 
        //没吃到，尾巴位置改变
        else {
            int tail = q.back();
            q.pop_back();
            vis.erase(tail);
        }
        q.push_front(cur);
        vis.insert(cur);
        return score;
    }

private:
    int m;
    int n;
    vector<vector<int>> food;
    int score;
    int idx;
    deque<int> q;
    unordered_set<int> vis;

    int f(int i, int j) {
        return i * n + j;
    }
};

/**
 * Your SnakeGame object will be instantiated and called as such:
 * SnakeGame* obj = new SnakeGame(width, height, food);
 * int param_1 = obj->move(direction);
 */
~~~

